!function(t){"use strict";t(document).ready(function(){hines.admin.patternsField().init()}),window.hines=window.hines||{},window.hines.admin=window.hines.admin||{},window.hines.admin.patternsField=function(){return{init:function(){0!==t(".js-patterns").length&&t(".js-patterns").each(function(e){!function(e){!function(t){t.before('        <div style="margin-bottom: 0.5em;">          <span style="white-space:nowrap">            Video:             &nbsp;             <a href="#" class="js-patterns-button" data-pattern="video" data-options="left">Left</a> &nbsp;            <a href="#" class="js-patterns-button" data-pattern="video">Full</a> &nbsp;            <a href="#" class="js-patterns-button" data-pattern="video" data-options="right">Right</a> &nbsp;            •             &nbsp;           </span>          <span style="white-space:nowrap">            Image:             &nbsp;             <a href="#" class="js-patterns-button" data-pattern="img" data-options="left">Left</a> &nbsp;            <a href="#" class="js-patterns-button" data-pattern="img" data-options="">Standard</a> &nbsp;            <a href="#" class="js-patterns-button" data-pattern="img" data-options="full">Full</a> &nbsp;            <a href="#" class="js-patterns-button" data-pattern="img" data-options="right">Right</a> &nbsp;            •             &nbsp;           </span>          <span style="white-space:nowrap">            <a href="#" class="js-patterns-button" data-pattern="quote">Quote</a> &nbsp;            •             &nbsp;             <a href="#" class="js-patterns-button" data-pattern="code">Code</a> &nbsp;          </span>        </div>      ')}(e),t(".js-patterns-button").on("click",function(e){e.preventDefault();var a=t(this).parent().parent().siblings(".js-patterns"),n=t(this).data("pattern"),i=t(this).data("options");!function(t,e,a){var n=t.val(),i=t.prop("selectionStart"),s=t.prop("selectionEnd"),r=n.substr(0,i),p=n.substr(i,s-i),o=n.substr(s),c="";e&&(c=function(t,e,a){var n=function(t){var e="";return"video"===t?e='<figure class="figure figure--embed">\n  <div class="figure--embed__16by9">\n    <iframe src="" allowfullscreen></iframe>\n    <figcaption></figcaption>\n  </div>\n</figure>':"img"===t?e='<figure class="figure figure--img">\n  <img src="" alt="">\n  <figcaption></figcaption>\n</figure>':"quote"===t?e='<figure class="figure figure--blockquote">\n  <blockquote>\n    <p></p>\n  </blockquote>\n  <figcaption></figcaption>\n</figure>':"code"===t&&(e="<pre><code></code></pre>"),e}(t);if("video"===t){if(a.includes("left")?n=n.replace('--embed"','--embed figure--left"'):a.includes("right")&&(n=n.replace('--embed"','--embed figure--right"')),e&&e.trim().startsWith("http")){var i=function(t){if(t.search(/youtube.com\/watch/)>=0){var e=new URL(t.trim()),a=e.searchParams.get("v"),n=e.searchParams.get("t");a&&(t="https://www.youtube.com/embed/"+a,n&&(t+="?start="+n))}else if(t.search(/\/\/vimeo.com/)>=0){var i=t.match(/vimeo.com\/(\w+)$/);i.length>1&&(t="https://player.vimeo.com/video/"+i[1])}return t}(e);n=n.replace('""','"'+i+'"')}}else"img"===t?(a.includes("left")?n=n.replace('--img"','--img figure--left"'):a.includes("full")?n=n.replace('--img"','--img figure--full"'):a.includes("right")&&(n=n.replace('--img"','--img figure--right"')),e&&e.trim().startsWith("http")&&(n=n.replace('src=""','src="'+e.trim()+'"'))):"quote"===t?(e=e.trim().replace(/\n\n/g,"</p>\n    <p>"),n=n.replace("<p></p>","<p>"+e+"</p>")):"code"===t&&(e=e.trim().replace(/\n\n/g,"</p>\n    <p>"),n=n.replace("<code></code>","<code>"+e+"</code>"));return n}(e,p,[a])),n=r+c+o,t.val(n)}(a,n,i)})}(t(this))})}}}}(django.jQuery);