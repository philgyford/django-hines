!function(t){"use strict";t(document).ready(function(){hines.admin.patternsField().init()}),window.hines=window.hines||{},window.hines.admin=window.hines.admin||{},window.hines.admin.patternsField=function(){return{init:function(){0!==t(".js-patterns").length&&t(".js-patterns").each(function(e){!function(e){!function(t){t.before('        <div style="margin-bottom: 0.5em;">          Video:           &nbsp;           <a href="#" class="js-patterns-button" data-pattern="video" data-options="left">Left</a> &nbsp;          <a href="#" class="js-patterns-button" data-pattern="video">Full</a> &nbsp;          <a href="#" class="js-patterns-button" data-pattern="video" data-options="right">Right</a> &nbsp;          &nbsp;           Image:           &nbsp;           <a href="#" class="js-patterns-button" data-pattern="img" data-options="left">Left</a> &nbsp;          <a href="#" class="js-patterns-button" data-pattern="img" data-options="full">Full</a> &nbsp;          <a href="#" class="js-patterns-button" data-pattern="img" data-options="right">Right</a> &nbsp;          •           &nbsp;           <a href="#" class="js-patterns-button" data-pattern="quote">Quote</a> &nbsp;          •           &nbsp;           <a href="#" class="js-patterns-button" data-pattern="code">Code</a> &nbsp;        </div>      ')}(e),t(".js-patterns-button").on("click",function(e){e.preventDefault();var n=t(this).parent().siblings(".js-patterns"),a=t(this).data("pattern"),i=t(this).data("options");!function(t,e,n){var a=t.val(),i=t.prop("selectionStart"),r=t.prop("selectionEnd"),s=a.substr(0,i),o=a.substr(i,r-i),p=a.substr(r),c="";e&&(c=function(t,e,n){var a=function(t){var e="";return"video"===t?e='<figure class="figure figure--embed">\n  <div class="figure--embed__16by9">\n    <iframe src="" allowfullscreen></iframe>\n    <figcaption></figcaption>\n  </div>\n</figure>\n':"img"===t?e='<figure class="figure figure--img">\n  <img src="" alt="">\n  <figcaption></figcaption>\n</figure>\n':"quote"===t?e='<figure class="figure figure--blockquote">\n  <blockquote>\n    <p></p>\n  </blockquote>\n  <figcaption></figcaption>\n</figure>\n':"code"===t&&(e="<pre><code></code></pre>\n"),e}(t);if("video"===t){if(n.includes("left")?a=a.replace('--embed"','--embed figure--left"'):n.includes("right")&&(a=a.replace('--embed"','--embed figure--right"')),e&&e.trim().startsWith("http")){var i=function(t){if(t.search(/youtube.com\/watch/)>=0){var e=new URL(t.trim()),n=e.searchParams.get("v"),a=e.searchParams.get("t");n&&(t="https://www.youtube.com/embed/"+n,a&&(t+="?start="+a))}else if(t.search(/\/\/vimeo.com/)>=0){var i=t.match(/vimeo.com\/(\w+)$/);i.length>1&&(t="https://player.vimeo.com/video/"+i[1])}return t}(e);a=a.replace('""','"'+i+'"')}}else"img"===t?(n.includes("left")?a=a.replace('--img"','--img figure--left"'):n.includes("full")?a=a.replace('--img"','--img figure--full"'):n.includes("right")&&(a=a.replace('--img"','--img figure--right"')),e&&e.trim().startsWith("http")&&(a=a.replace('src=""','src="'+e.trim()+'"'))):"quote"===t?(e=e.trim().replace(/\n\n/g,"</p>\n    <p>"),a=a.replace("<p></p>","<p>"+e+"</p>")):"code"===t&&(e=e.trim().replace(/\n\n/g,"</p>\n    <p>"),a=a.replace("<code></code>","<code>"+e+"</code>"));return a}(e,o,[n])),a=s+c+p,t.val(a)}(n,a,i)})}(t(this))})}}}}(django.jQuery);