"use strict";var $={getElByClass:function(t){var e=document.getElementsByClassName(t);return e&&1===e.length&&(e=e[0]),e},showEl:function(t,e){$.getElByClass(t).style.display=e||""},hideEl:function(t){$.getElByClass(t).style.display="none"},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},each:function(t,n){var e=document.querySelectorAll(t);Array.prototype.forEach.call(e,function(t,e){n.call(e,t)})}},ready=function(t){if("function"==typeof t)return"interactive"===document.readyState||"complete"===document.readyState?t():void document.addEventListener("DOMContentLoaded",t,!1)};
!function(){"use strict";window.hines=window.hines||{},window.hines.navbar=function(){var n="js-navbar-item-search",a="js-navbar-nav-item-search";return{init:function(){$.addClass(document.body,"js-can-navbar"),function(){var t=document.createElement("button");t.setAttribute("aria-expanded","false"),t.setAttribute("aria-controls","js-navbar-form"),t.setAttribute("type","button"),t.setAttribute("class","button--link nav__link "+a),t.textContent="Search";var e=document.createElement("li");e.setAttribute("class","nav__item nav__item--split "+n),e.appendChild(t),$.getElByClass("js-navbar-nav").appendChild(e)}(),$.getElByClass(a).addEventListener("click",function(t){t.preventDefault(),$.hideEl(n),$.showEl("js-navbar-form","block"),$.getElByClass(a).setAttribute("aria-expanded","true")})}}}}();
!function(){"use strict";window.hines=window.hines||{},window.hines.chart=function(t){function n(t){return(4<(""+d3.format(".0f")(t)).length?d3.format(","):d3.format("d"))(t)}var a,_={top:5,bottom:20,left:50,right:5},r=function(t,e){var a="<strong>"+t.data.label+":</strong> ";return"bar-stacked"==i&&(a+=t.data.columns[e].label+": "),a+=n(t.data.columns[e].value)},m=d3.scaleBand(),v=d3.scaleLinear(),x=d3.axisBottom(m).tickSize(0).tickPadding(6),y=d3.axisLeft(v).ticks(5).tickSize(0).tickPadding(6).tickFormat(n),b=d3.axisLeft(v).ticks(5).tickFormat(""),i="bar";function w(t){var e=d3.select(this.parentNode).datum().key;a.html(r(t,e)),a.style("visibility","visible")}function k(t){var e=event.pageX+15;window.innerWidth-event.pageX<120&&(e=event.pageX-90),a.style("top",event.pageY-10+"px").style("left",e+"px")}function F(){a.style("visibility","hidden")}function z(t){var e=d3.select(this.parentNode).datum().key,a=t.data[e];if(!("url"in a&&a.url))return!1;window.location.href=a.url}function e(t){t.each(function(e){var l,o,d=d3.select(this),t=Object.keys(e[0].columns);1<t.length&&(i="bar-stacked");var u=d3.stack().keys(t).value(function(t,e){return t.columns[e].value})(e);m.domain(e.map(function(t){return t.label})),v.domain([0,d3.max(u,function(t){return d3.max(t,function(t){return t[1]})})]);var h=d.append("svg"),p=h.append("g").classed("chart__inner chart__inner--"+i,!0);!function(){var t=p.append("g").classed("chart__axis chart__axis--x",!0);20<e.length?t.classed("chart__axis--x--20",!0):15<e.length?t.classed("chart__axis--x--15",!0):10<e.length&&t.classed("chart__axis--x--10",!0);p.append("g").classed("chart__axis chart__axis--y",!0),p.append("g").classed("chart__axis chart__axis--y--grid",!0)}();var g=p.append("g");function a(){var t,e,a,n,r;function i(t,e){return m(t.data.label)}function c(t){return v(t[1])}function s(t){return v(t[0])-v(t[1])}t=parseInt(d.style("width"),10),e=parseInt(d.style("height"),10),console.log(t),l=t-_.left-_.right,o=e-_.top-_.bottom,m.range([0,l]).padding(.1),v.rangeRound([o,0]),h.transition().attr("width",t).attr("height",e),p.attr("transform",f(_.left,_.top)),h.select(".chart__axis--x").attr("transform",f(0,o)).call(x),h.select(".chart__axis--y").call(y),h.select(".chart__axis--y--grid").call(b.tickSize(-l)),a=m.bandwidth(),n=g.selectAll(".chart__bargroup").data(u),(r=(n=n.enter().append("g").merge(n).attr("class",function(t,e){return"chart__bargroup chart__bargroup--"+e})).selectAll("rect").data(function(t){return t})).enter().append("rect").attr("x",i).attr("y",c).attr("width",a).attr("height",s).classed("chart__bar",!0).classed("chart__bar--clickable",function(t,e){var a=d3.select(this.parentNode).datum().key;return!!("url"in t.data.columns[a]&&t.data.columns[a].url)}).style("opacity",function(t,e){var a,n,r,i=(new Date).getFullYear();return parseInt(t.label)==i?(a=new Date,n=new Date(a.getFullYear(),0,0),r=a-n,Math.floor(r/864e5)/366):1}).on("mouseover",w).on("mousemove",k).on("mouseout",F).on("click",z),r.transition().attr("x",i).attr("y",c).attr("width",a).attr("height",s),r.exit().remove()}function f(t,e){return"translate("+t+","+e+")"}a(),window.addEventListener("resize",a)})}return a=0==document.getElementsByClassName("chart-tooltip").length?d3.select("body").append("div").classed("chart-tooltip js-chart-tooltip",!0):d3.select(".chart-tooltip"),e.margin=function(t){return arguments.length?(_=t,e):_},e.tooltipFormat=function(t){return arguments.length?(r=t,e):r},e}}();