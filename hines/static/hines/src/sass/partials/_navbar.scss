
.navbar {
  position: relative;
  width: 100%;
  max-width: $grid-max-width;
  margin: 0.5rem auto 36px auto;
  text-rendering: optimizeLegibility;
  @include hyphens(none);
}

.navbar__inner {
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  align-items: flex-end;
  margin-left: ($grid-gutter_width / 2);
  margin-right: ($grid-gutter_width / 2);
}

//.navbar__icon {
  //width: 50px;
  //height: 50px;
  //background: url("../img/site_icon.jpg") 0 0 no-repeat;
  //background-size: contain;
//}

.navbar__title {
  order: 1;
  font-size: $navbar-brand-font-size;
  text-transform: uppercase;
  line-height: 1.2em;
  white-space: nowrap;
  margin-right: auto;
  border-bottom: $navbar-border-width solid $black;
  width: 100%;
  padding-bottom: 1px;
  margin-top: 11px;

  a {
    color: $navbar-text-color;
    text-decoration: none;

    &:focus,
    &:hover,
    &:visited {
      color: $navbar-text-color;
      text-decoration: none;
    }
    &:visited {
      color: $navbar-text-color;
    }
    &:hover {
      color: $navbar-link-hover-color;
    }
  }
}

.navbar__nav {
  display: flex;
  flex-direction: row;
  order: 2;
  flex-grow: 2;
  flex-wrap: wrap;
  list-style: none;
  padding-left: 0;
  margin-top: $navbar-border-width;
  margin-bottom: 0;
  // Maximise space between links and search:
  margin-right: auto;
  background-image: repeating-linear-gradient(
    to bottom,
    $black,
    $black $navbar-border-width,
    $white $navbar-border-width,
    $white ($navbar-border-width * 2)
  );

  @include text-style-nav;

  .nav__item {
    background: $white;
    padding: 0 $navbar-link-padding-x 0 0;
    line-height: $navbar-border-width;
    margin-bottom: $navbar-border-width;
  }

  .nav__item--split {
    margin-left: $navbar-border-width;
    padding-left: $navbar-link-padding-x;
  }

  .nav__link {
    display: block;
    padding: 0;
    color: $navbar-link-color;
    white-space: nowrap;

    // Need to repeat this for the search button at narrow widths:
    font-weight: $text-style-nav-font-weight;

    &:focus,
    &:hover {
      color: $navbar-link-hover-color;
    }
    &:active {
      color: $navbar-link-active-color;
    }
  }

  .active > .nav__link,
  .nav__link.active {
    color: $navbar-text-color;

  }
  .active > a.nav__link,
  a.nav__link.active {
    &:focus,
    &:hover {
      color: $navbar-link-hover-color;
    }
  }
}

.navbar__form {
  /* At narrowest widths, navbar__form goes underneath navbar__title. */
  order: 3;
  flex-grow: 2;
  align-self: flex-start;
  padding-bottom: $navbar-border-width;
  border-bottom: $navbar-border-width solid $black;
  margin-bottom: $navbar-border-width;

  form {
    float: right;
  }

  .form--inline .form__control {
    width: 8em;
    margin-right: ($navbar-border-width / 2);
  }

  // Hide the form at narrow widths if the JS is enabled:
  body.js-can-navbar & {
    display: none;
  }

  //input {
    //background: blue;
  //}
}

.js-navbar-nav-item-search {
  text-transform: uppercase;
}


@media (min-width: 510px) {
  /* Form is to right of title. Nav is underneath. */

  .navbar__title {
    width: auto;
  }

  .navbar__nav {
    order: 3;
  }

  .navbar__form {
    order: 2;
    margin-bottom: 0;
    //padding-top: ($navbar-border-width / 2);
    padding-bottom: $navbar-border-width;

    body.js-can-navbar & {
      display: block;
    }
  }

  .js-navbar-item-search {
    display: none;
  }

  //.navbar__form input {
    //background: green;
  //}

}

@media (min-width: 860px) {
  /* Form is to right of title. Nav is in line with title's bottom border. */

  .navbar {
    /* Replace margin we're taking off the nav__item by adding it to the .navbar's, which is usually $navbar-border-width. */
    margin-bottom: (36px + $navbar-border-width);
  }

  .navbar__title {
    width: auto;
    margin-right: $navbar-link-padding-x;
    margin-top: 10px;
  }

  .navbar__nav {
    order: 2;
    width: auto;

    .nav__item {
      margin-bottom: 0;
    }
  }

  .navbar__form {
    position: absolute;
    top: 0;
    right: ($grid-gutter-width / 2);
    border-bottom: none;
    padding-top: 0;
  }

  //.navbar__form input {
    //background: yellow;
  //}
}

