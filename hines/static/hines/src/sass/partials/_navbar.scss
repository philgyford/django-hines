
// All of these should add up to a whole-number of $vertical-space-sm's:
$navbar-top-space:              ($vertical-space * 0);
$navbar-bottom-space:           ($vertical-space * 1);
$navbar-title-top-space:        ($vertical-space-sm * 1.5);
$navbar-title-bottom-space:     ($vertical-space-sm * 0.5);
$navbar-title-line-height:      $vertical-space-sm;

// Variations/additions for the widest width:
$navbar-form-top-wide:          ($vertical-space-sm * 0.5);
$navbar-bottom-space-wide:      ($vertical-space + $navbar-form-top-wide);
$navbar-title-top-space-wide:   $vertical-space;


.navbar {
  position: relative;
  width: 100%;
  max-width: $grid-max-width;
  margin: $navbar-top-space auto $navbar-bottom-space auto;
  text-rendering: optimizeLegibility;
  @include hyphens(none);

  .nav__item:first-child {
    // Undo the split we add at the start of generic .navs:
    margin-left: 0;
    padding-left: 0;
  }
}

.navbar__inner {
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  align-items: flex-end;
  margin-left: ($grid-gutter_width / 2);
  margin-right: ($grid-gutter_width / 2);
}

//.navbar__icon {
  //width: 50px;
  //height: 50px;
  //background: url("../img/site_icon.jpg") 0 0 no-repeat;
  //background-size: contain;
//}

.navbar__title {
  order:            1;
  width:            100%;
  margin-right:     auto;
  margin-top:       $navbar-title-top-space;
  padding-bottom:   $navbar-title-bottom-space;
  font-size:        $navbar-brand-font-size;
  line-height:      $navbar-title-line-height;
  text-transform:   uppercase;
  white-space:      nowrap;
  letter-spacing:   0.03em;
  word-spacing:     0.06em;
  border-bottom:    $nav-border-width solid $border-color;

  a {
    color: $nav-text-color;
    text-decoration: none;

    &:focus,
    &:hover,
    &:visited {
      color: $nav-text-color;
      text-decoration: none;
    }
    &:visited {
      color: $nav-text-color;
    }
    &:hover {
      color: $nav-link-hover-color;
    }
  }
}

.navbar .nav {
  order: 2;
  flex-grow: 2;
  // Auto maximises space between links and search:
  margin: $nav-border-width auto 0 0;
}

.navbar__form {
  /* At narrowest widths, navbar__form goes underneath navbar__title. */
  order: 3;
  flex-grow: 2;
  align-self: flex-start;
  padding-bottom: $nav-border-width;
  border-bottom: $nav-border-width solid $border-color;
  margin-bottom: $nav-border-width;

  form {
    float: right;
  }

  .form--inline {
    .form__control {
      width: 8em;
      margin-right: ($nav-border-width / 2);
      margin-bottom: 0;
	    @include text-style-alt();
    }

    .button {
      margin-bottom: 0;
    }
  }

  // Hide the form at narrow widths if the JS is enabled:
  body.js-can-navbar & {
    display: none;
  }

  // input {
  //   background: blue;
  // }
}

.js-navbar-nav-item-search {
  text-transform: uppercase;
}


@media (min-width: 510px) {
  /* Form is to right of title. Nav is underneath. */

  .navbar__title {
    width: auto;
  }

  .navbar .nav {
    order: 3;
  }

  .navbar__form {
    order: 2;
    margin-top: ($nav-border-width - ($input-button-border-width * 2));
    margin-bottom: 0;
    padding-bottom: $nav-border-width;

    body.js-can-navbar & {
      display: block;
    }
  }

  .js-navbar-item-search {
    display: none;
  }

  // .navbar__form input {
  //   background: green;
  // }

}

@media (min-width: 1030px) {
  /* Form is to right of title. Nav is in line with title's bottom border. */

  .navbar {
    /* Replace margin we're taking off the nav__item by adding it to the .navbar's, which is usually $nav-border-width. */
    // margin-bottom: (36px + $nav-border-width);
    margin-bottom: $navbar-bottom-space-wide;
  }

  .navbar__title {
    width: auto;
    margin-right: $nav-link-padding-x;
    margin-top:   $navbar-title-top-space-wide;
  }

  .navbar .nav {
    order: 2;
    width: auto;

    .nav__item {
      margin-bottom: 0;
    }
  }

  .navbar__form {
    position: absolute;
    top: $navbar-form-top-wide;
    right: ($grid-gutter-width / 2);
    border-bottom: none;
    margin-top: 0;
  }

  // .navbar__form input {
  //   background: yellow;
  // }
}
