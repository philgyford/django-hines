{% comment %}
A list of a Tweet's Media objects (ie, photo, GIF or video).

A slightly altered version of Ditto's twitter/includes/media.html template.
Beacuse:
  * We use different HTML/CSS
  * We don't currently have different 'view's.
  * We don't want to use tweet.get_absolute_url().

Expects:

 * tweet, the Tweet object.

{% endcomment %}

{% if tweet.media_count > 0 %}
  {% load l10n %}

  {% with media_list=tweet.media.all %}
    <ol class="gallery{% if media_list|length >= 4 %} gallery--4{% elif media_list|length == 3 %} gallery--3{% endif %}">
      {% for media in media_list %}
        <li class="gallery__item">
          <div class="gallery__item__img">
            {% if media.media_type == 'photo' %}
              <a href="{{ tweet.permalink }}" title="See this tweet on Twitter"><img src="{{ media.small_url }}" width="{{ media.small_w|unlocalize }}" height="{{ media.small_h|unlocalize }}" class="img-fluid" alt="Photo thumbnail"></a>
            {% else %}
              {# Video or Animated GIF #}
              <video width="{{ media.small_w|unlocalize }}" height="{{ media.small_h|unlocalize }}" poster="{{ media.large_url }}" controls preload="none">
                <source src="{{ media.video_url }}" type="{{ media.video_mime_type }}">
              </video>
            {% endif %}
            </div>
        </li>
      {% endfor %}
    </ol>
  {% endwith %}
{% endif %}

