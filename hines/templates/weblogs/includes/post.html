{% comment %}
Display a Post.

Expects:

* post - A Post.
* in_list - Boolean, default True. Will show a linked title, and metadata.
* perms - Django permissions.
* style: 'full' (default) or 'compact'.
{% endcomment %}

<article class="post">
	{% if in_list|default_if_none:True %}
		<header>
			<h1 class="post__title"><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h1>
		</header>
	{% endif %}

	{% if perms.weblogs.can_change_post %}
		<p><a class="admin" href="{% url 'admin:weblogs_post_change' post.id %}" title="Edit this Post in the Django Admin">Edit</a></p>
	{% endif %}

	{% if style|default_if_none:'full' == 'compact' %}
		<div class="post__excerpt">
			{{ post.intro_html|safe }}
		</div>
	{% else %}

		<div class="post__intro">
			{{ post.intro_html|safe }}
		</div>

		<div class="post__body">
			{{ post.body_html|safe }}
		</div>
	{% endif %}

	{% if in_list|default_if_none:True %}
		<footer>
			{% load hines_core %}
			Published at {% display_time post.time_published link_to_day=True %}
			{% if post.comment_count > 0 %}
				|
				{{ post.comment_count }} comment{{ post.comment_count|pluralize }}
			{% endif %}
			{% if post.trackback_count > 0 %}
				|
				{{ post.trackback_count }} trackback{{ post.trackback_count|pluralize }}
			{% endif %}
		</footer>
	{% endif %}
</article>

